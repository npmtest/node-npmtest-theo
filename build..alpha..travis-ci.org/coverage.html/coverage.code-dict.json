{"/home/travis/build/npmtest/node-npmtest-theo/test.js":"/* istanbul instrument in package npmtest_theo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireExampleJsFromReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - post-init\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-theo/lib.npmtest_theo.js":"/* istanbul instrument in package npmtest_theo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_theo = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_theo = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-theo/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-theo && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_theo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_theo\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // post-init\n    // run browser js-env code - post-init\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_theo.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_theo.rollup.js'] =\n            local.assetsDict['/assets.npmtest_theo.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_theo.__dirname + '/lib.npmtest_theo.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/index.js":"/* eslint new-cap: off */\n/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nconst path = require('path')\nconst fs = require('fs')\nconst _ = require('lodash')\nconst through = require('through2')\nconst gutil = require('gulp-util')\nconst tinycolor = require('tinycolor2')\n\nconst util = require('./util')\nconst constants = require('./util/constants')\nconst kebabCase = require('./util/kebabCase')\nconst TheoError = require('./util/error')\n\nconst PropSet = require('./prop-set')\n\nconst camelCase = require('lodash/camelCase')\n\n// //////////////////////////////////////////////////////////////////\n// Helpers\n// //////////////////////////////////////////////////////////////////\n\nconst cleanOutput = (output) =>\n  output\n    .replace(/^ {4}/gm, '')\n    .replace(/^\\s*\\n/gm, '')\n    .trim()\n\nconst remToPx = (prop, meta) => {\n  const baseFontPercentage = typeof meta.baseFontPercentage === 'number' ? meta.baseFontPercentage : 100\n  const baseFontPixel = typeof meta.baseFontPixel === 'number' ? meta.baseFontPixel : 16\n  return util.remToPx(prop.value, baseFontPercentage, baseFontPixel)\n}\n\n// //////////////////////////////////////////////////////////////////\n// Value Transforms\n// //////////////////////////////////////////////////////////////////\n\nlet VALUE_TRANSFORMS = {}\n\nconst registerValueTransform = (name, matcher, transformer) => {\n  if (typeof name !== 'string') {\n    throw TheoError('valueTransform name must be a string')\n  }\n  if (typeof matcher !== 'function') {\n    throw TheoError('valueTransform matcher must be a function')\n  }\n  if (typeof transformer !== 'function') {\n    throw TheoError('valueTransform transformer must be a function')\n  }\n  VALUE_TRANSFORMS[name] = {\n    matcher: matcher,\n    transformer: transformer\n  }\n}\n\nregisterValueTransform('color/rgb',\n  prop => prop.type === 'color',\n  prop => tinycolor(prop.value).toRgbString()\n)\n\nregisterValueTransform('color/hex',\n  prop => prop.type === 'color',\n  prop => tinycolor(prop.value).toHexString()\n)\n\n// RRGGBBAA Hex8 notation\n// As defined in the CSS spec:\n// https://drafts.csswg.org/css-color-4/#hex-notation\nregisterValueTransform('color/hex8rgba',\n  prop => prop.type === 'color',\n  prop => tinycolor(prop.value).toHex8String()\n)\n\n// AARRGGBB Hex8 notation\n// Useful for Android development:\n// https://developer.android.com/reference/android/graphics/Color.html\nregisterValueTransform('color/hex8argb',\n  prop => prop.type === 'color',\n  prop => tinycolor(prop.value).toHex8String().replace(/^#(.{6})(.{2})/, '#$2$1')\n)\n\nregisterValueTransform('percentage/float',\n  prop => /%/.test(prop.value),\n  prop => prop.value.replace(constants.PERCENTAGE_PATTERN, (match, number) => parseFloat(number / 100))\n)\n\nregisterValueTransform('relative/pixel',\n  prop => util.isRelativeSpacing(prop.value),\n  (prop, meta) => remToPx(prop, meta)\n)\n\nregisterValueTransform('relative/pixelValue',\n  prop => util.isRelativeSpacing(prop.value),\n  (prop, meta) => remToPx(prop, meta).replace(/px$/g, '')\n)\n\n// //////////////////////////////////////////////////////////////////\n// Transforms\n// //////////////////////////////////////////////////////////////////\n\nlet TRANSFORMS = {}\n\nconst registerTransform = (name, valueTransforms) => {\n  if (typeof name !== 'string') {\n    throw TheoError('transform name must be a string')\n  }\n  if (!Array.isArray(valueTransforms)) {\n    throw TheoError('valueTransforms must be an array of registered value transforms')\n  }\n  valueTransforms.forEach(t => {\n    if (!_.has(VALUE_TRANSFORMS, t)) {\n      throw TheoError('valueTransforms must be an array of registered value transforms')\n    }\n  })\n  TRANSFORMS[name] = valueTransforms\n}\n\nregisterTransform('raw', [\n\n])\n\nregisterTransform('web', [\n  'color/rgb'\n])\n\nregisterTransform('ios', [\n  'color/rgb',\n  'relative/pixelValue',\n  'percentage/float'\n])\n\nregisterTransform('android', [\n  'color/hex8argb',\n  'relative/pixelValue',\n  'percentage/float'\n])\n\nregisterTransform('aura', [\n  'color/hex'\n])\n\n// //////////////////////////////////////////////////////////////////\n// Formats\n// //////////////////////////////////////////////////////////////////\n\nlet FORMATS = {}\n\nconst registerFormat = (name, formatter) => {\n  if (typeof name !== 'string') {\n    throw TheoError('format name must be a string')\n  }\n  if (typeof formatter !== 'function') {\n    throw TheoError('format formatter must be a function')\n  }\n  FORMATS[name] = formatter\n}\n\nregisterFormat('json', (json) => {\n  let output = Object.assign(\n    {},\n    ...Object.keys(json.props).map(key =>\n      ({[json.props[key].name]: json.props[key].value})))\n  return JSON.stringify(output, null, 2)\n})\n\nregisterFormat('raw.json', (json) =>\n  JSON.stringify(json, null, 2))\n\nregisterFormat('ios.json', (json) => {\n  let output = {\n    properties: Object.keys(json.props).map(key => {\n      let prop = json.props[key]\n      prop.name = camelCase(prop.name)\n      return prop\n    })\n  }\n  return JSON.stringify(output, null, 2)\n})\n\nregisterFormat('android.xml', (json) => {\n  let getTag = (prop) => {\n    if (prop.type === 'color') {\n      return 'color'\n    }\n    return 'property'\n  }\n  const props = Object.keys(json.props).map(key => {\n    const prop = json.props[key]\n    const tag = getTag(prop)\n    const name = prop.name.toUpperCase()\n    return `<${tag} name=\"${name}\" category=\"${prop.category}\">${prop.value}</${tag}>`\n  }).join('\\n  ')\n  let xml = `\n    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n    <resources>\n      ${props}\n    </resources>\n  `\n  return cleanOutput(xml)\n})\n\nregisterFormat('scss', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `$${kebabCase(json.props[prop].name)}: ${json.props[prop].value};`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('default.scss', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `$${kebabCase(json.props[prop].name)}: ${json.props[prop].value} !default;`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('list.scss', (json, options) => {\n  let items = Array.isArray(json.items) ? json.items : []\n  items = items.map(item => `\"${item}\"`).join(',\\n  ')\n  let basename = path.basename(options.path, path.extname(options.path)).replace(/\\..*/g, '')\n  let name = `${basename}-list`\n  if (typeof options.name === 'function') {\n    let n = options.name(basename, options.path)\n    if (typeof n === 'string') {\n      name = n\n    }\n  }\n  let output = `\n    $${name}: (\n      ${items}\n    );\n  `\n  return cleanOutput(output)\n})\n\nregisterFormat('map.scss', (json, options) => {\n  options = _.defaults({}, options, {\n    nameSuffix: '-map'\n  })\n  let items = Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `\"${kebabCase(json.props[prop].name)}\": (${json.props[prop].value})`\n    ]).join('\\n  ')\n  ).join(',\\n  ')\n  let basename = path.basename(\n    options.path, path.extname(options.path)\n  ).replace(/\\..*/g, '')\n  let name = `${basename}${options.nameSuffix}`\n  if (typeof options.name === 'function') {\n    let n = options.name(basename, options.path)\n    if (typeof n === 'string') {\n      name = n\n    }\n  }\n  let output = `\n    $${name}: (\n      ${items}\n    );\n  `\n  return cleanOutput(output)\n})\n\nregisterFormat('map.variables.scss', (json, options) => {\n  options = _.defaults({}, options, {\n    nameSuffix: '-map-variables'\n  })\n  _.transform(json.props, (result, value, name, props) => {\n    props[name].value = `$${kebabCase(name)}`\n    props[name].type = 'variable'\n  })\n  return FORMATS['map.scss'](json, options)\n})\n\nregisterFormat('sass', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `$${kebabCase(json.props[prop].name)}: ${json.props[prop].value}`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('default.sass', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `$${kebabCase(json.props[prop].name)}: ${json.props[prop].value} !default`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('less', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `@${kebabCase(json.props[prop].name)}: ${json.props[prop].value};`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('styl', (json) =>\n  Object.keys(json.props).map(prop =>\n    _.compact([\n      (json.props[prop].comment ? `// ${json.props[prop].comment}` : ''),\n      `$${kebabCase(json.props[prop].name)} = ${json.props[prop].value}`\n    ]).join('\\n')\n  ).join('\\n'))\n\nregisterFormat('aura.theme', (json) => {\n  let auraImports = Array.isArray(json.auraImports) ? json.auraImports : []\n  let auraExtends = typeof json.auraExtends === 'string' ? json.auraExtends : null\n  auraImports = auraImports.map(theme => {\n    return `<aura:importTheme name=\"${theme}\" />`\n  }).join('\\n  ')\n  let props = Object.keys(json.props).map(prop =>\n    `<aura:var name=\"${camelCase(json.props[prop].name)}\" value=\"${json.props[prop].value}\" />`\n  ).join('\\n  ')\n  let openTag = auraExtends ? `<aura:theme extends=\"${auraExtends}\">` : '<aura:theme>'\n  let xml = `\n    ${openTag}\n      ${auraImports}\n      ${props}\n    </aura:theme>\n  `\n  return cleanOutput(xml)\n})\n\nregisterFormat('aura.tokens', (json) => {\n  let auraImports = _.toArray(json.auraImports).map(theme => {\n    return `<aura:import name=\"${theme}\" />`\n  }).join('\\n  ')\n  let auraExtends = typeof json.auraExtends === 'string' ? json.auraExtends : null\n  let props = Object.keys(json.props).map(key => {\n    const prop = json.props[key]\n    let name = camelCase(prop.name)\n    let cssProperties = (() => {\n      if (Array.isArray(prop.cssProperties)) {\n        return `property=\"${prop.cssProperties.join(',')}\"`\n      }\n      return ''\n    })()\n    return `<aura:token name=\"${name}\" value=\"${prop.value}\" ${cssProperties} />`\n  }).join('\\n  ')\n  let openTag = auraExtends\n    ? `<aura:tokens extends=\"${auraExtends}\">`\n    : '<aura:tokens>'\n  let xml = `\n    ${openTag}\n      ${auraImports}\n      ${props}\n    </aura:tokens>\n  `\n  return cleanOutput(xml)\n})\n\nregisterFormat('html', require('./formats/html'))\n\nregisterFormat('common.js', (json) => {\n  let values = Object.keys(json.props).map(key => {\n    const prop = json.props[key]\n    let name = camelCase(prop.name)\n    let value = prop.value\n    switch (typeof value) {\n      case 'string':\n      default:\n        value = `\"${value}\"`\n    }\n    return _.compact([\n      (prop.comment ? `// ${prop.comment}` : ''),\n      `${name}: ${value},`\n    ]).join('\\n      ')\n  }).join('\\n      ').replace(/,$/, '')\n  let output = `\n    module.exports = {\n      ${values}\n    };\n  `\n  return cleanOutput(output)\n})\n\nregisterFormat('amd.js', (json) => {\n  let values = Object.keys(json.props).map(key => {\n    const prop = json.props[key]\n    let name = camelCase(prop.name)\n    let value = prop.value\n    switch (typeof value) {\n      case 'string':\n      default:\n        value = `\"${value}\"`\n    }\n    return _.compact([\n      (prop.comment ? `// ${prop.comment}` : ''),\n      `${name}: ${value},`\n    ]).join('\\n        ')\n  }).join('\\n        ').replace(/,$/, '')\n  let output = `\n    define(function() {\n      return {\n        ${values}\n      };\n    });\n  `\n  return cleanOutput(output)\n})\n\n// //////////////////////////////////////////////////////////////////\n// Exports\n// //////////////////////////////////////////////////////////////////\n\nmodule.exports = {\n\n  /**\n   * Helpers that return transform streams\n   */\n  plugins: {\n    /**\n     * Push a file into a new transform stream\n     *\n     * @param {string} filePath\n     * @return {stream}\n     */\n    file: (filePath) => {\n      let stream = new through.obj()\n      fs.readFile(filePath, (err, buffer) => {\n        if (err) return stream.emit('error', err)\n        let file = new gutil.File({\n          path: filePath,\n          contents: buffer\n        })\n        stream.write(file)\n        stream.end()\n      })\n      return stream\n    },\n    /**\n     * Transform the prop values\n     *\n     * @param {string} type\n     * @return {stream}\n     */\n    transform: (type, options = {}) => {\n      if (typeof options !== 'undefined' && typeof options !== 'object') {\n        throw TheoError('transform() options must be an object')\n      }\n      if (!_.has(TRANSFORMS, type)) {\n        throw TheoError(`\"${type}\" is not a registered transform`)\n      }\n      let transform = TRANSFORMS[type].map(name => VALUE_TRANSFORMS[name])\n      return through.obj((file, enc, next) => {\n        let newFile = file.clone()\n        try {\n          newFile.contents = new PropSet(newFile, transform, options).transform().toBuffer()\n        } catch (err) {\n          return next(err)\n        }\n        next(null, newFile)\n      })\n    },\n\n    /**\n     * Convert the vinyl '.json' file to a JSON primative\n     *\n     * @param {function} [callback]\n     * @return {stream}\n     */\n    getResult: (callback) =>\n      through.obj((file, enc, next) => {\n        if (typeof callback === 'function' && file.isBuffer()) {\n          let result = file.contents.toString()\n          callback(result)\n          return next(null, file)\n        }\n      }),\n\n    /**\n     * Format the props JSON into a new output format\n     *\n     * @param {string} type\n     * @param {object} options\n     * @param {function} [options.propsFilter] - A function that filters props before formatting\n     */\n    format: (type, options = {}) => {\n      let defaults = {\n        propsFilter: () => true,\n        propsMap: prop => prop\n      }\n      if (typeof options !== 'object') {\n        throw TheoError('format() options must be an object')\n      }\n      options = _.merge({}, defaults, options)\n      if (typeof options.propsFilter !== 'function') {\n        throw TheoError('format() options.propsFilter must be a function')\n      }\n      if (typeof options.propsMap !== 'function') {\n        throw TheoError('format() options.propsMap must be a function')\n      }\n      // Get the formatter\n      if (typeof FORMATS[type] === 'undefined') {\n        throw TheoError(`\"${type}\" is not a registerd format`)\n      }\n      let formatter = FORMATS[type]\n      return through.obj((file, enc, next) => {\n        let newFile = file.clone()\n        // Get the transformed JSON\n        let json = util.parsePropsFile(newFile)\n        // Rename the file\n        newFile.path = newFile.path.replace(/(json|yml)$/, type)\n        // Run filter/map the props\n        let updatedProps = _(json.props)\n          .filter(options.propsFilter)\n          .map(options.propsMap)\n          .value()\n        // Convert the props to a key/value\n        json.props = _.reduce(updatedProps, (props, prop) => {\n          props[prop.name] = prop\n          return props\n        }, {})\n        json.propKeys = Object.keys(json.props)\n        // Format the json\n        let formatted = formatter(json, _.merge({}, options, {\n          path: file.path\n        }))\n        // Set the file contents to the result of the formatter\n        newFile.contents = Buffer.from(formatted, 'utf8')\n        next(null, newFile)\n      })\n    }\n\n  },\n\n  /**\n   * Register a new value transform. If a transform with the provided\n   * name already exists it will be overwritten\n   *\n   * @param {string} name\n   * @param {function(prop)} filter - a function that returns a true if the transform should be applied\n   * @param {function(prop,meta)} - a function that should return the new prop value\n   */\n  registerValueTransform,\n\n  /**\n   * Check if a value transform exists\n   *\n   * @param {string} name\n   */\n  valueTransformIsRegistered: (name) => typeof VALUE_TRANSFORMS[name] !== 'undefined',\n\n  /**\n   * Get a registered valueTransform\n   *\n   * @param {} name\n   */\n  getValueTransform: function (name) {\n    if (!this.valueTransformIsRegistered(name)) {\n      throw TheoError(`\"${name}\" is not a registered valueTransform`)\n    }\n    return _.merge({}, VALUE_TRANSFORMS[name])\n  },\n\n  /**\n   * Register a new transform. If a transform with the provided\n   * name already exists it will be overwritten\n   *\n   * @param {string} name\n   * @param {array} valueTransforms - a list of value transforms to be applied to the props\n   */\n  registerTransform,\n\n  /**\n   * Check if a transform exists\n   *\n   * @param {string} name\n   */\n  transformIsRegistered: (name) => typeof TRANSFORMS[name] !== 'undefined',\n\n  /**\n   * Get a registered format\n   *\n   * @param {} name\n   */\n  getTransform: function (name) {\n    if (!this.transformIsRegistered(name)) {\n      throw TheoError(`\"${name}\" is not a registered transform`)\n    }\n    return _.merge([], TRANSFORMS[name])\n  },\n\n  /**\n   * Register a new format. If a format with the provided\n   * name already exists it will be overwritten\n   *\n   * @param {string} name\n   * @param {function(json,[options])} formatter - a function that should return a string represenation of the new format\n   */\n  registerFormat,\n\n  /**\n   * Check if a transform exists\n   *\n   * @param {string} name\n   */\n  formatIsRegistered: (name) => typeof FORMATS[name] !== 'undefined',\n\n  /**\n   * Get a registered format\n   *\n   * @param {} name\n   */\n  getFormat: function (name) {\n    if (!this.formatIsRegistered(name)) {\n      throw TheoError(`\"${name}\" is not a registered format`)\n    }\n    return FORMATS[name]\n  },\n\n  /**\n   * Transform a string to kebabCase\n   *\n   * @param {string} string\n   */\n  kebabCase\n}\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/util/index.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nlet yaml = require('js-yaml')\nlet JSON5 = require('json5')\nlet path = require('path')\n\nmodule.exports = {\n\n  isRelativeSpacing (value) {\n    return /rem$/.test(value)\n  },\n\n  remToPx (rem, baseFontPercentage, baseFontPixel) {\n    return ((parseFloat(rem.replace(/rem/g, '')) * baseFontPixel) * (baseFontPercentage / 100)) + 'px'\n  },\n\n  parsePropsFile (file) {\n    switch (path.extname(file.path)) {\n      case '.yaml':\n      case '.yml':\n        return yaml.safeLoad(file.contents.toString())\n      default:\n        return JSON5.parse(file.contents.toString())\n    }\n  }\n\n}\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/util/constants.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nmodule.exports = {\n\n  ALIAS_PATTERN: /{!([^}]+)}/g,\n\n  BOX_SHADOW_PATTERN: /(\\d+)(?:px)? (\\d+)(?:px)? (\\d+)(?:px)? ((rgba\\(.*\\))|#\\d{3,6})/g,\n\n  PERCENTAGE_PATTERN: /(\\d+)%/g\n\n}\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/util/kebabCase.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nconst noCase = require('no-case')\n\nmodule.exports = (string) => noCase(string, null, '-')\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/util/error.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nconst gutil = require('gulp-util')\n\nmodule.exports = (msg) =>\n  new gutil.PluginError('theo', msg)\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/prop-set.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nlet path = require('path')\nlet fs = require('fs')\nlet _ = require('lodash')\nlet gutil = require('gulp-util')\nlet util = require('./util')\nlet TheoError = require('./util/error')\n\nclass PropSet {\n\n  constructor (file, valueTransforms, options = {}) {\n    if (typeof file.isBuffer !== 'function' || typeof file.isBuffer === 'undefined') {\n      throw TheoError('transform() must use vinyl files')\n    }\n\n    let defaults = {\n      includeRawValue: false,\n      includeMeta: false,\n      resolveAliases: true\n    }\n\n    this.file = file\n    this.path = file.path\n    this.valueTransforms = valueTransforms\n    this.options = Object.assign({}, defaults, options)\n\n    this._init()\n  }\n\n  _init () {\n    let { options } = this\n    // Create the definition\n    let def = {\n      global: {},\n      aliases: {}\n    }\n    // Merge the JSON into the definition\n    try {\n      let json = util.parsePropsFile(this.file)\n      if (options.jsonPreProcess) {\n        json = options.jsonPreProcess(json)\n      }\n      def = _.merge(def, json)\n    } catch (e) {\n      throw TheoError(`transform() encountered an invalid Design Token file: ${this.file.path}`)\n    }\n    // Raw\n    if (options.includeRawValue === true) {\n      _.forEach(def.props, (prop) => {\n        prop['.rawValue'] = _.merge({}, prop).value\n      })\n    }\n    // Globals\n    this._resolveGlobals(def)\n    // Validate\n    this._validate(def)\n    // Resolve any local aliases before resolving imports\n    if (options.resolveAliases !== false) {\n      this._resolveAliases(def, 'local')\n    }\n    // Collect all the import definitions\n    let imports = this._resolveImports(def).map(i => i.def)\n    // Merge the imported definitions\n    def = _.merge.apply(null, _.flatten([{}, imports, def]))\n    // Resolve any additional aliases that were depending on imports\n    if (imports.length > 0 && options.resolveAliases !== false) {\n      this._resolveAliases(def)\n    }\n    // Cleanup\n    delete def.global\n    delete def.imports\n    // Save\n    this.def = def\n    return this\n  }\n\n  transform () {\n    this._transformProps()\n    return this\n  }\n\n  toBuffer () {\n    return Buffer.from(this.toJSON(), 'utf8')\n  }\n\n  toJSON () {\n    // Create a copy\n    let def = _.merge({}, this.def)\n    // Provide the keys for easy iteration\n    def.propKeys = Object.keys(def.props)\n    // Go\n    return JSON.stringify(def, null, 2)\n  }\n\n  _resolveGlobals (def) {\n    if (Object.keys(def.global).length === 0) return\n    _.forEach(def.props, (prop, key) => {\n      def.props[key] = Object.assign({}, def.global, prop)\n    })\n    delete def.global\n  }\n\n  _validate (def) {\n    if (Array.isArray(def.props)) {\n      throw TheoError('Design Token \"props\" key must be an object')\n    }\n    if (!_.has(def, 'props') || !_.isObject(def.props)) {\n      def.props = {}\n    }\n    // Make sure properties have all required keys\n    _.forEach(def.props, (prop, name) =>\n      ['value', 'type', 'category'].forEach(key => {\n        if (!_.has(prop, key)) {\n          throw TheoError(`prop \"${name}\" contained no \"${key}\" key`)\n        }\n      })\n    )\n  }\n\n  _resolveAliases (def, type) {\n    // convert all aliases to object format\n    _.forEach(def.aliases, (value, key) => {\n      if (typeof value !== 'object') {\n        def.aliases[key] = { 'value': value }\n      }\n    })\n    _.forEach(def.aliases, (replace, key) => {\n      let s = _.escapeRegExp(key)\n      _.forEach(def.aliases, alias =>\n        this._replaceAliasedValues(s, alias, replace, def, type))\n      _.forEach(def.props, prop =>\n        this._replaceAliasedValues(s, prop, replace, def, type))\n    })\n  }\n\n  _replaceAliasedValues (needle, haystack, replacement, def, type) {\n    let isAlias = new RegExp(`{!${needle}}`, 'g')\n    let isAliasStructure = RegExp('{![^}]*}', 'g')\n\n    // Value contains an alias\n    if (isAlias.test(haystack.value)) {\n      // Resolve the alias\n      haystack.value = haystack.value.replace(isAlias, replacement.value)\n      // Pass original alias data to .alias key\n      haystack['.alias'] = replacement\n    }\n    if ((type !== 'local') && isAliasStructure.test(haystack.value)) {\n      _.forEach(haystack.value.match(isAliasStructure), a => {\n        let alias = a.toString().replace('{!', '').replace('}', '')\n        if (!def.aliases[alias]) throw new Error(`Alias ${a} not found`)\n      })\n    }\n  }\n\n  _resolveImports (def) {\n    if (!Array.isArray(def.imports)) return []\n    return def.imports.map(i => {\n      let p = path.resolve(path.dirname(this.path), i)\n      if (!fs.existsSync(p)) {\n        throw TheoError(`Import not found: ${p}`)\n      }\n      let f = fs.readFileSync(p)\n      if (!f) {\n        throw TheoError(`Import not found: ${p}`)\n      }\n      let v = new gutil.File({\n        path: p,\n        contents: Buffer.from(f, 'utf8')\n      })\n      return new PropSet(v, this._transform, this.options)\n    })\n  }\n\n  _transformProps () {\n    _.forEach(this.def.props, (prop, name) => {\n      // Move the name into the prop for use in the transformer\n      if (!_.has(prop, 'name')) {\n        prop.name = name\n      }\n      // Extract the meta data\n      let meta = prop['.meta']\n      if (this.options.includeMeta !== true) {\n        delete prop['.meta']\n      }\n      // Transform the value\n      this._transformValue(prop, meta)\n    })\n  }\n\n  _transformValue (prop, meta) {\n    _.forEach(this.valueTransforms, v => {\n      let p = Object.assign({}, prop)\n      let m = Object.assign({}, meta)\n      if (v.matcher(p, m) === true) {\n        prop.value = v.transformer(p, m)\n      }\n    })\n  }\n\n}\n\nmodule.exports = PropSet\n","/home/travis/build/npmtest/node-npmtest-theo/node_modules/theo/lib/formats/html.js":"/*\nCopyright (c) 2015, salesforce.com, inc. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of salesforce.com, inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nlet groupBy = require('lodash/groupBy')\nlet camelCase = require('lodash/camelCase')\nlet upperfirst = require('lodash/upperFirst')\n\nclass Styleguide {\n\n  constructor (json) {\n    this.categories = groupBy(json.props, 'category')\n  }\n\n  renderRowHeader (id, heading) {\n    return `\n      <thead>\n        <tr id=${id}>\n          <th scope=\"col\">${heading}</th>\n          <th scope=\"col\">Value</th>\n          <th scope=\"col\">Examples</th>\n          <th scope=\"col\">Usage</th>\n        </tr>\n      </thead>\n    `\n  }\n\n  renderRow (prop, example) {\n    let name = camelCase(prop.name)\n    return `\n      <tr>\n        <th scope=\"row\">\n          <code>${name}</code>\n        </th>\n        <td>\n          <code>${prop.value}</code>\n        </td>\n        ${example}\n        <td>${prop.comment ? prop.comment : ''}</td>\n      </tr>\n    `\n  }\n\n  renderSpacing (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div class=\"metric-box\" style=\"width: ${prop.value}; height: ${prop.value};\"></div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderSizing (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div class=\"metric-box\" style=\"width: ${prop.value}; height: ${prop.value};\"></div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderFont (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div style=\"font-family: ${prop.value};\">\n            The quick brown fox jumps over the lazy dog.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderFontStyle (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div style=\"font-style: ${prop.value};\">\n            The quick brown fox jumps over the lazy dog.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderFontWeight (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div style=\"font-weight: ${prop.value};\">\n            The quick brown fox jumps over the lazy dog.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderFontSize (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div style=\"font-size: ${prop.value};\">\n            The quick brown fox jumps over the lazy dog.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderLineHeight (props) {\n    return props.map(prop => {\n      let vHeight = !isNaN(prop.value) ? `${prop.value}em` : prop.value\n      let example = `\n        <td>\n          <div class=\"line-height-example\" style=\"line-height: ${prop.value}; background-size: 100% ${vHeight};\">\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec\n            elementum odio et lacus rutrum molestie. Nunc arcu enim, elementum\n            id feugiat at, venenatis quis erat.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderFontFamily (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div style=\"font-family: ${prop.value};\">\n            The quick brown fox jumps over the lazy dog.\n          </div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBorderStyle (props) {\n    return props.map(prop => {\n      let example = `<td style=\"border: ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBorderColor (props) {\n    return props.map(prop => {\n      let example = `<td style=\"border: 2px solid ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderHrColor (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <hr style=\"border-top-color: ${prop.value};\" />\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderRadius (props) {\n    return props.map(prop => {\n      let name = camelCase(prop.name)\n      let example = `\n        <td>\n          <div class=\"radius-box ${name}\" style=\"border-radius: ${prop.value};\"></div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBorderRadius (props) {\n    return props.map(prop => {\n      let example = `\n        <td>\n          <div class=\"radius-box\" style=\"border-radius: ${prop.value};\"></div>\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBackgroundColor (props) {\n    return props.map(prop => {\n      let example = `<td style=\"background-color: ${prop.value}; border: 1px solid #f6f6f6;\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderGradient (props) {\n    return props.map(prop => {\n      let example = `<td style=\"background: ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBackgroundGradient (props) {\n    return props.map(prop => {\n      let example = `<td style=\"background-image: ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderDropShadow (props) {\n    return props.map(prop => {\n      let example = `<td style=\"box-shadow: ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderBoxShadow (props) {\n    return props.map(prop => {\n      let example = `<td style=\"box-shadow: ${prop.value};\"></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderTextColor (props) {\n    return props.map(prop => {\n      let example = `\n        <td style=\"background-color: #f6f6f6; color: ${prop.value};\">\n          The quick brown fox jumps over the lazy dog.\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderTextShadow (props) {\n    return props.map(prop => {\n      let example = `\n        <td style=\"text-shadow: ${prop.value};\">\n          The quick brown fox jumps over the lazy dog.\n        </td>\n      `\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderTime (props) {\n    return props.map(prop => {\n      let example = `<td></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderMediaQuery (props) {\n    return props.map(prop => {\n      let example = `<td></td>`\n      return this.renderRow(prop, example)\n    })\n  }\n\n  renderSection (type, heading, fn) {\n    let props = this.categories[type]\n    if (!props) { return '' }\n    let name = upperfirst(camelCase(type))\n    let render = typeof fn === 'function' ? fn : this[`render${name}`]\n    return `\n      <section>\n        <table>\n          ${this.renderRowHeader(type, heading)}\n          <tbody>\n            ${render.call(this, props).join('').trim()}\n          </tbody>\n        </table>\n        <hr />\n      </section>\n    `\n  }\n\n  render () {\n    return `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n        <head>\n          <meta charset=\"utf-8\" />\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <title>Design Tokens</title>\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css\" />\n          <style>${require('./html.style')}</style>\n        </head>\n        <body>\n          <header role=\"banner\" class=\"banner\">\n            <div class=\"container\">\n              <h1>Design Tokens</h1>\n            </div>\n          </header>\n\n          <div class=\"container\">\n            <main role=\"main\">\n              ${this.renderSection('sizing', 'Sizing')}\n              ${this.renderSection('spacing', 'Spacing')}\n              ${this.renderSection('font', 'Fonts')}\n              ${this.renderSection('font-style', 'Font Styles')}\n              ${this.renderSection('font-weight', 'Font Weights')}\n              ${this.renderSection('font-size', 'Font Sizes')}\n              ${this.renderSection('line-height', 'Line Heights')}\n              ${this.renderSection('font-families', 'Font Families')}\n              ${this.renderSection('border-style', 'Border Styles')}\n              ${this.renderSection('border-color', 'Border Colors')}\n              ${this.renderSection('radius', 'Radius')}\n              ${this.renderSection('border-radius', 'Border Radii')}\n              ${this.renderSection('hr-color', 'Horizontal Rule Colors')}\n              ${this.renderSection('background-color', 'Background Colors')}\n              ${this.renderSection('gradient', 'Gradients')}\n              ${this.renderSection('background-gradient', 'Background Gradients')}\n              ${this.renderSection('drop-shadow', 'Drop Shadows')}\n              ${this.renderSection('box-shadow', 'Box Shadows')}\n              ${this.renderSection('inner-shadow', 'Inner Drop Shadows', this.renderDropShadow)}\n              ${this.renderSection('box-shadow', 'Box Shadows')}\n              ${this.renderSection('text-color', 'Text Colors')}\n              ${this.renderSection('text-shadow', 'Text Shadows')}\n              ${this.renderSection('time', 'Time')}\n              ${this.renderSection('media-query', 'Media Queries')}\n            </main>\n          </div>\n        </body>\n      </html>\n    `\n  }\n}\n\nmodule.exports = (json) => {\n  const styleguide = new Styleguide(json)\n  return styleguide.render()\n}\n"}